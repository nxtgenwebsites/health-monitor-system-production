<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <link rel="shortcut icon" href="assets/icons/logo.svg" type="image/x-icon" />
    <link rel="stylesheet" href="css/swiper.css" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/toastr.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/register.css">
    <link rel="stylesheet" href="css/responsive.css" />
</head>

<body>
    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="/">
                <img src="assets/images/logo.png" width="145" class="img-fluid" alt="logo">
            </a>
            <dv class="mx-3 trustpilot">
                <img src="assets/images/trustpilot.png" class="img-fluid" alt="logo">
            </dv>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul
                    class="navbar-nav align-items-lg-center justify-content-lg-center flex-lg-grow-1 mb-2 mb-lg-0 mt-lg-0 mt-4">
                    <li class="nav-item">
                        <a class="nav-link mx-2 text-primary" href="emergency.html">Emergency</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link mx-2 text-primary" href="community.html">Community</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link mx-2 text-primary" href="signup.html">Register</a>
                    </li>
                </ul>
                <div class="login-btn">
                    <a href="login.html"><button class="btn primary-btn">Login</button></a>
                </div>
            </div>
        </div>
    </nav>
    <!-- Navbar End -->
    <!-- Register Start -->
    <section class="auth-section d-flex justify-content-center">
        <div class="auth-border">
            <div class="auth-container d-flex flex-column align-items-center">
                <div class="register-form-heading">
                    <h5>Please tell us a little more about you!</h5>
                </div>
                <div class="foms-container">
                    <form class="register-from" id="register-form">
                        <div class="d-flex flex-column flex-lg-row justify-content-center register-info gap-0 gap-lg-3">
                            <div class="my-3 w-100">
                                <div class="d-flex gap-2 w-100">
                                    <div class="title w-100 position-relative">
                                        <select class="form-select" id="user-title" required>
                                            <option value="" selected disabled hidden>Title</option>
                                            <option value="Mr">Mr</option>
                                            <option value="Mrs">Mrs</option>
                                            <option value="Miss">Miss</option>
                                            <option value="Rec">Rec</option>
                                            <option value="Pst">Pst</option>
                                            <option value="Mlm">Mlm</option>
                                            <option value="Dr">Dr</option>
                                        </select>

                                    </div>
                                    <div class="name w-100">
                                        <input type="text" placeholder="First Name" required id="first-name">
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <input type="email" placeholder="Email" required id="user-email" disabled>
                                </div>

                                <div class="mt-3">
                                    <input type="text" placeholder="Password" required id="user-password">
                                </div>
                            </div>
                            <div class="w-100">
                                <div class="d-flex gap-2 w-100">
                                    <div class="mt-3 w-100">
                                        <input type="text" placeholder="Middle Name" id="middle-name">
                                    </div>
                                    <div class="mt-3 w-100">
                                        <input type="text" placeholder="Last Name" id="last-name">
                                    </div>
                                </div>
                                <div class="my-3">
                                    <input type="text" placeholder="Username" required id="username" disabled>
                                </div>
                                <div class="mt-3">
                                    <input type="text" placeholder="Confirm Password" required id="confirm-password">
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 mt-lg-0">
                            <div class="terms-condition d-flex align-items-start gap-2">
                                <div class="checkbox terms-condition">
                                    <input type="checkbox" name="terms" id="terms-condition">
                                    </label>
                                </div>
                                <p>By using this website, you are hereby accepting the terms and conditions stipulated
                                    within the Privacy Policy Agreement.
                                    If you are not in agreement with our terms and conditions, then you should refrain
                                    from further use of our sites.</p>
                            </div>
                            <div class="proceed-btn text-center">
                                <button class="btn primary-btn" type="submit" id="proceed-btn">Create an account</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        </div>
    </section>
    <!-- Register End -->

    <!-- Footer start -->
    <footer class="footer-section">
        <div class="container">
            <div class="row row-gap-3">
                <div class="col-lg-5 col-md-6 text-md-start text-center">
                    <div class="footer-card">
                        <div class="footer-img">
                            <a href="">
                                <img src="assets/images/logo.png" width="150" alt="" class="img-fluid">
                            </a>
                        </div>
                        <div class="footer-content">
                            <p class="mt-4 mb-3">Join our newsletter for latest updates <br>
                                and features. You don't want to miss it!</p>
                            <div class="footer-subscribe position-relative w-100">
                                <input type="email" class="" placeholder="Enter your email here">
                                <button type="submit" class="btn">Subscribe</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 text-md-start text-center">
                    <ul class="navbar-nav">
                        <h5 class="fw-bold footer-heading text-primary">Home</h5>
                        <li class="nav-item"><a href="emergency.html" class="nav-link">Emergency</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">Symptoms</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">Remote Care</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">Monitors</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">Health Info</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 text-md-start text-center">
                    <ul class="navbar-nav">
                        <h5 class="fw-bold footer-heading text-primary">Communities</h5>
                        <li class="nav-item"><a href="/user-dashboard/hospitals.html" class="nav-link">Hospitals</a>
                        </li>
                        <li class="nav-item"><a href="#" class="nav-link">Pharmacies</a></li>
                        <li class="nav-item"><a href="/user-dashboard/Chemists.html" class="nav-link">Community Digital
                                Health Assistants</a></li>
                        <li class="nav-item"><a href="#" class="nav-link">Tech Support</a></li>
                        <li class="nav-item"><a href="/user-dashboard/complaints.html" class="nav-link">Complaints</a>
                        </li>
                        <li class="nav-item"><a href="/user-dashboard/reviews.html" class="nav-link">Reviews</a></li>
                        <li class="nav-item"><a href="/user-dashboard/privacy-policy.html" class="nav-link">Privacy
                                Policy</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 text-md-start text-center">
                    <ul class="navbar-nav">
                        <h5 class="fw-bold footer-heading text-primary">User Dashboard</h5>
                        <li class="nav-item"><a href="login.html" class="nav-link">Sponsorship</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">Print</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">Password & 2FA</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">Access Control</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">National Policies</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">Upgrade to Community Edition</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">Delete Account</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <hr class="mt-5 mb-2">
        <div class="copyright-section d-flex align-items-center">
            <p class="font-size">© Copyright 2025 HealthMonitor. All rights reserved</p>
            <p class="ms-md-auto me-3 font-size">Share on socials</p>
            <div class="social-media">
                <button id="x-share-btn" class="btn p-0 border-0">
                    <img src="assets/icons/X.svg" alt="img" class="">
                </button>
                <button id="fb-share-btn" class="btn p-0 border-0">
                    <img src="assets/icons/Facebook.svg" alt="img" class="">
                </button>
                <a href="https://www.instagram.com/" target="">
                    <button id="Instagram-share-btn" class="btn p-0 border-0">
                        <img src="assets/icons/Instagram.svg" alt="img" class="">
                    </button>
                </a>
                <button id="linkedin-share-btn" class="btn p-0 border-0">
                    <img src="assets/icons/linkedin.svg" alt="img" class="">
                </button>
            </div>
        </div>

    </footer>
    <!-- Footer end -->

    <!-- Popup start -->
    <div class="success-popup d-none" id="popup">
        <div class="popup-box bg-white text-center position-relative ">
            <h5 class="text-primary">Email Verification Required</h5>
            <p>A verification email has been sent to your registered email address. Please check your inbox (and spam folder) and click
            the activation link to verify your account.</p>
            <div class="close-btn">
                <button class="btn" type="submit" id="close-btn"><img src="assets/icons/close.svg" alt="close"></button>
            </div>
        </div>
    </div>
    <!-- Popup end -->
    <script src="js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="js/toastr.min.js"></script>
    <script>

        const email = localStorage.getItem('email');
        const username = localStorage.getItem('username');

        document.getElementById('username').value = username;
        document.getElementById('user-email').value = email;

        const registerForm = document.getElementById('register-form');
        const popup = document.getElementById('popup');

        const emailData = {
            email: "",
            username: "",
            userId: ""
        }

        registerForm.addEventListener(('submit'), (e) => {
            e.preventDefault()
            const password = document.getElementById('user-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
           const termsCondition = document.getElementById('terms-condition').checked;

          if (!termsCondition) {
                return toastr.warning(`Terms are not accepted.`, "Warning", {
                    "closeButton": true,
                    "progressBar": true,
                    "showDuration": "300",
                    "hideDuration": "1000",
                    "timeOut": "2000",
                    "extendedTimeOut": "1000",
                });
            }

            if (password !== confirmPassword) {
                return toastr.error(`Passwords do not match.`, "Error", {
                    "closeButton": true,
                    "progressBar": true,
                    "showDuration": "300",
                    "hideDuration": "1000",
                    "timeOut": "2000",
                    "extendedTimeOut": "1000",
                })
            }

            const checkbox = document.getElementById('cbx-46');

            console.log(checkbox);

            const data = {
                title: document.getElementById('user-title').value,
                name: document.getElementById('first-name').value,
                username: document.getElementById('username').value,
                middle_name: document.getElementById('middle-name').value,
                last_name: document.getElementById('last-name').value,
                email: document.getElementById('user-email').value,
                password: document.getElementById('user-password').value,
            };

            axios.post('https://health-monitor-backend.vercel.app/api/sign_up', data).then((res) => {
                console.log(res.data);

                emailData.email = res.data.user.email
                emailData.username = res.data.user.username
                emailData.userId = res.data.user.id

                localStorage.setItem('token', res.data.token);
                localStorage.setItem('u_id', res.data.user.id);
                sendEmail();
                registerForm.reset();
                popup.classList.remove('d-none');

            }).catch((error) => {
                console.log(error.response?.data?.message);
                toastr.error(`${error.response?.data?.message || 'Something went wrong.'}`, "Error", {
                    "closeButton": true,
                    "progressBar": true,
                    "showDuration": "300",
                    "hideDuration": "1000",
                    "timeOut": "2000",
                    "extendedTimeOut": "1000",
                })
            })
        })

        const sendEmail = () => {
            axios.post('https://health-monitor-backend.vercel.app/api/email_verification', emailData).then((res) => {
                localStorage.removeItem('email');
                localStorage.getItem('username');
            }).catch((error) => {
                console.log(error);
            })
        }

        // thanks popup 
        const closeBtn = document.getElementById('close-btn');

        closeBtn.addEventListener('click', () => {
            popup.classList.add('d-none')
        })

        document.getElementById('linkedin-share-btn').addEventListener(('click'), () => {
            const shareUrl = "https://www.linkedin.com/sharing/share-offsite";

            const params = new URLSearchParams({
                url: "https://health-monitor-sa.vercel.app/",
                title: "Health Monitor",
                summary: "A smarter way to track and manage your health with our intuitive dashboard. Gain complete control over your well-being, all in one place", // Summary text
                source: "Health Monitor"
            }).toString();

            window.open(`${shareUrl}?${params}`, "_blank", "width=600,height=400");
        })

        document.getElementById('x-share-btn').addEventListener(('click'), () => {
            const tweetText = encodeURIComponent("A smarter way to track and manage your health with our intuitive dashboard. Gain complete control over your well-being, all in one place: https://health-monitor-sa.vercel.app/ #healthMonitor");
            const tweetUrl = `https://twitter.com/intent/tweet?text=${tweetText}`;
            window.open(tweetUrl, "_blank", "width=600,height=400");
        })

        document.getElementById('fb-share-btn').addEventListener(('click'), () => {
            const fbShareUrl = "https://www.facebook.com/sharer/sharer.php";
            const params = new URLSearchParams({
                u: "https://health-monitor-sa.vercel.app/", // Your website URL
                quote: "A smarter way to track and manage your health with our intuitive dashboard. Gain complete control over your well-being, all in one place", // Text to share
                hashtag: "#healthMonitor", // Optional hashtag
            }).toString();

            const shareUrl = `${fbShareUrl}?${params}`;
            window.open(shareUrl, "_blank", "width=600,height=400");
        })
    </script>
</body>

</html>